{
  "fixQuestFromPlaytestFeedback": {
    "description": "Fix a quest based on playtester feedback including bugs, recommendations, and quality metrics",
    "systemPrompt": "You are an expert game quest designer who fixes quests based on playtester feedback. You maintain the core essence of the quest while addressing all critical issues, improving clarity, and ensuring engaging gameplay. You use similar successful quests as reference for quality standards.",
    "userPrompt": "# QUEST FIXING TASK\n\nFix the following quest based on playtester feedback. Maintain the quest's core concept and narrative but address all identified issues.\n\n## ORIGINAL QUEST\n\nTitle: {{questTitle}}\nDescription: {{questDescription}}\nDifficulty: {{questDifficulty}}\nQuest Giver: {{questGiver}}\n\nObjectives:\n{{questObjectives}}\n\nRewards:\n{{questRewards}}\n\n## PLAYTESTER FINDINGS\n\nOverall Grade: {{playtestGrade}} ({{playtestScore}}/100)\nRecommendation: {{playtestRecommendation}}\nConsensus: {{playtestConsensus}}\n\n### Bug Reports\n{{bugReports}}\n\n### Recommendations\n{{recommendations}}\n\n### Quality Metrics\n- Completion Rate: {{completionRate}}\n- Average Difficulty: {{avgDifficulty}}/10 (Target: {{targetDifficulty}}/10)\n- Average Engagement: {{avgEngagement}}/10\n- Pacing: {{pacing}}\n\n### Confusion Points\n{{confusionPoints}}\n\n{{#if hasSimilarQuests}}\n## SIMILAR SUCCESSFUL QUESTS (for reference)\n\n{{similarQuestsContext}}\n\nThese quests received high grades (A/B). Use them as reference for quality, clarity, and engagement.\n{{/if}}\n\n## INSTRUCTIONS\n\n1. **Fix Critical & Major Bugs**: Address all game-breaking and significant issues\n2. **Apply High-Priority Recommendations**: Implement suggestions that significantly improve quality\n3. **Improve Clarity**: Rewrite confusing objectives or descriptions\n4. **Adjust Difficulty**: Balance based on completion rate and difficulty ratings\n5. **Enhance Engagement**: Improve pacing and add variety if needed\n6. **Maintain Consistency**: Use similar successful quests as reference for tone and structure\n7. **Keep Core Concept**: Don't completely change the quest's theme or narrative\n\n## OUTPUT FORMAT\n\nReturn a JSON object with the following structure:\n\n```json\n{\n  \"fixedQuest\": {\n    \"title\": \"Quest title (update if needed for clarity)\",\n    \"description\": \"Improved quest description\",\n    \"difficulty\": \"easy|medium|hard\",\n    \"questGiver\": \"NPC name\",\n    \"objectives\": [\n      {\n        \"id\": \"obj_1\",\n        \"type\": \"combat|collect|interact|explore|escort\",\n        \"description\": \"Clear, specific objective description\",\n        \"target\": \"mob/item/npc name\",\n        \"count\": 3,\n        \"location\": \"Specific location name\",\n        \"optional\": false\n      }\n    ],\n    \"rewards\": {\n      \"experience\": 100,\n      \"gold\": 50,\n      \"items\": []\n    }\n  },\n  \"changes\": [\n    {\n      \"field\": \"objectives[0].description\",\n      \"before\": \"Original text\",\n      \"after\": \"Fixed text\",\n      \"reason\": \"Why this change was made (reference bug/recommendation if applicable)\",\n      \"addresses\": [\"Bug: Vague objective\", \"Recommendation: Add specific location\"]\n    }\n  ],\n  \"fixedIssues\": {\n    \"bugsFix\n\ned\": [\n      {\n        \"severity\": \"critical|major|minor\",\n        \"description\": \"Original bug description\",\n        \"resolution\": \"How it was fixed\"\n      }\n    ],\n    \"recommendationsApplied\": [\n      {\n        \"priority\": \"critical|high|medium\",\n        \"recommendation\": \"Original recommendation\",\n        \"implementation\": \"How it was implemented\"\n      }\n    ]\n  },\n  \"summary\": \"Brief summary of all changes made and expected impact on playtest results\"\n}\n```\n\n**Important**: Only include changes that directly address identified issues. Don't make unnecessary changes.",
    "temperature": 0.3,
    "maxTokens": 3000
  },
  "analyzeQuestIssues": {
    "description": "Analyze playtester feedback to categorize and prioritize issues for fixing",
    "systemPrompt": "You are a QA analyst specializing in game design. You analyze playtester feedback to identify root causes and prioritize fixes.",
    "userPrompt": "Analyze the following playtester feedback and categorize the issues:\n\n## Bug Reports\n{{bugReports}}\n\n## Recommendations\n{{recommendations}}\n\n## Metrics\n- Completion: {{completionRate}}\n- Difficulty: {{avgDifficulty}}/10\n- Engagement: {{avgEngagement}}/10\n\nProvide:\n1. Root cause analysis for major issues\n2. Prioritized list of fixes (must-fix, should-fix, nice-to-have)\n3. Estimated impact of each fix on overall grade",
    "temperature": 0.2,
    "maxTokens": 2000
  },
  "validateFixedQuest": {
    "description": "Validate that the fixed quest properly addresses the identified issues",
    "systemPrompt": "You are a quest design validator. You verify that fixes properly address playtester feedback without introducing new problems.",
    "userPrompt": "Validate the following quest fix:\n\n## Original Issues\n{{originalIssues}}\n\n## Changes Made\n{{changes}}\n\n## Fixed Quest\n{{fixedQuest}}\n\nCheck:\n1. All critical/major bugs addressed\n2. High-priority recommendations applied\n3. No new issues introduced\n4. Quest still makes narrative sense\n5. Difficulty appropriate for rewards\n\nReturn: {\"valid\": true/false, \"issues\": [], \"suggestions\": []}",
    "temperature": 0.1,
    "maxTokens": 1500
  }
}
