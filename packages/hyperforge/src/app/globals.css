@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light Mode: "Clean Room" - Industrial Constructivist */
    /* Sterile engineering lab with Safety Orange accents */
    --background: 98% 0.01 240; /* Ceramic White */
    --foreground: 15% 0.02 260; /* Very Dark Slate - HIGH CONTRAST */

    --glass-bg: 85% 0.01 240; /* Much darker grey for clear contrast */
    --glass-border: 65% 0 0; /* Dark border for definition */

    --neon-blue: 40% 0.15 240; /* Darker Technical Blueprint Blue */
    --neon-purple: 45% 0.25 45; /* Darker Safety Orange for better contrast */
    --neon-green: 40% 0.18 150; /* Darker Success Green */

    --radius: 0.25rem; /* Sharp 4px corners - machined look */
  }

  .dark {
    /* Dark Mode: "Molten Core" - High-heat foundry */
    /* Matte charcoal with glowing molten gold accents */
    --background: 12% 0.05 260; /* Obsidian / Matte Black */
    --foreground: 95% 0.01 240; /* White / Light Grey (high contrast) */

    --glass-bg: 18% 0.05 260; /* Gunmetal Grey */
    --glass-border: 30% 0 0; /* Dark Iron */

    --neon-blue: 65% 0.15 200; /* Coolant Teal */
    --neon-purple: 75% 0.2 70; /* Molten Gold / Heat Warning */
    --neon-green: 60% 0.18 150; /* Success indicator */
  }
}

body {
  @apply bg-background text-foreground font-mono;
  /* Allow scrolling - individual pages can control their own overflow */
  overflow-x: hidden;
  overflow-y: auto;
  min-height: 100vh;
  min-height: 100dvh; /* Dynamic viewport height for mobile */
}

@layer utilities {
  .glass-panel {
    @apply bg-[oklch(var(--glass-bg))] backdrop-blur-sm border border-[oklch(var(--glass-border))];
  }

  .industrial-border {
    border: 1px solid oklch(var(--glass-border));
  }

  .molten-glow {
    box-shadow: 0 0 8px oklch(var(--neon-purple) / 0.4);
  }

  .technical-grid {
    background-image:
      linear-gradient(oklch(var(--glass-border) / 0.3) 1px, transparent 1px),
      linear-gradient(
        90deg,
        oklch(var(--glass-border) / 0.3) 1px,
        transparent 1px
      );
    background-size: 20px 20px;
  }

  .text-glow {
    text-shadow: 0 0 10px oklch(var(--neon-blue) / 0.5);
  }

  .neon-blue-glow {
    box-shadow:
      0 0 10px oklch(var(--neon-blue)),
      0 0 20px oklch(var(--neon-blue) / 0.5);
  }

  /* Themed Scrollbar */
  .themed-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: oklch(var(--glass-border)) transparent;
  }

  .themed-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .themed-scrollbar::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 3px;
  }

  .themed-scrollbar::-webkit-scrollbar-thumb {
    background: oklch(var(--glass-border));
    border-radius: 3px;
    transition: background 0.2s ease;
  }

  .themed-scrollbar::-webkit-scrollbar-thumb:hover {
    background: oklch(var(--neon-blue) / 0.6);
  }

  .dark .themed-scrollbar::-webkit-scrollbar-thumb {
    background: oklch(35% 0 0);
  }

  .dark .themed-scrollbar::-webkit-scrollbar-thumb:hover {
    background: oklch(var(--neon-blue) / 0.7);
  }
}

/* React Flow Custom Styles */
@layer components {
  /* React Flow Base Theme */
  .react-flow {
    --rf-node-bg: oklch(var(--glass-bg));
    --rf-node-border: oklch(var(--glass-border));
    --rf-handle-bg: oklch(var(--neon-blue));
  }

  /* Controls styling */
  .react-flow__controls {
    box-shadow: 0 4px 20px oklch(0 0 0 / 0.3);
  }

  .react-flow__controls-button {
    background: oklch(var(--glass-bg)) !important;
    border: none !important;
    color: oklch(var(--foreground)) !important;
    transition: all 0.2s ease;
  }

  .react-flow__controls-button:hover {
    background: oklch(var(--neon-blue) / 0.2) !important;
    color: oklch(var(--neon-blue)) !important;
  }

  .react-flow__controls-button svg {
    fill: currentColor !important;
  }

  /* MiniMap styling */
  .react-flow__minimap {
    box-shadow: 0 4px 20px oklch(0 0 0 / 0.3);
  }

  /* Attribution hidden */
  .react-flow__attribution {
    display: none;
  }

  /* Edge styling */
  .react-flow__edge-path {
    stroke-linecap: round;
  }

  .react-flow__edge.selected .react-flow__edge-path,
  .react-flow__edge:hover .react-flow__edge-path {
    stroke-width: 3;
  }

  /* Handle styling */
  .react-flow__handle {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .react-flow__handle:hover {
    transform: scale(1.3);
    box-shadow: 0 0 10px oklch(var(--neon-blue));
  }

  /* Connection line */
  .react-flow__connection-line {
    stroke: oklch(var(--neon-blue));
    stroke-width: 2;
    stroke-dasharray: 5;
    animation: dash 0.5s linear infinite;
  }

  @keyframes dash {
    to {
      stroke-dashoffset: -10;
    }
  }

  /* Selection box */
  .react-flow__selection {
    background: oklch(var(--neon-blue) / 0.1);
    border: 1px dashed oklch(var(--neon-blue));
  }

  /* Node animations */
  .react-flow__node {
    transition: transform 0.1s ease, box-shadow 0.2s ease;
  }

  .react-flow__node.selected {
    z-index: 10 !important;
  }

  /* Panel animations */
  .react-flow__panel {
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Background dots animation on hover */
  .react-flow__background {
    transition: opacity 0.3s ease;
  }

  /* Node toolbar animation */
  .react-flow__node-toolbar {
    animation: slideIn 0.2s ease;
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(5px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Custom scrollbar for flow */
  .react-flow__renderer {
    scrollbar-width: thin;
    scrollbar-color: oklch(var(--glass-border)) transparent;
  }

  /* Edge label styling */
  .react-flow__edge-textwrapper {
    pointer-events: all;
  }
}

